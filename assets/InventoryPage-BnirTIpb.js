import{j as e,G as F}from"./vendor-ui-DzKfmWQ2.js";import{a as o}from"./vendor-react-BMup7rWC.js";import{u as S,i as y,A as b,R as I,M as k}from"./index-v3n02KM2.js";import{u as B}from"./useInventory-Ceb6Ka_3.js";import"./vendor-state-B05B3u4P.js";import"./vendor-charts-8MqGPDjv.js";const E=({allData:s,selectedVariantIndex:a=0})=>{const[r,c]=o.useState(null),d=S(h=>{const u=h.curtainTypes.find(x=>x.id===s?.typeId);if(!u)return null;const f=u.shapes.find(x=>x.id===s?.id);return f?f.variants?.[a]:null});o.useEffect(()=>{d&&c(d)},[d,a]);const l=r?.inStock??0,n=r?.sold??0,i=l+n;return e.jsxs("ul",{className:"cardContent",children:[e.jsxs("li",{className:"contentItem",children:[e.jsx("span",{className:"contentText DT-text",children:"Ø§Ù„Ù…Ø®Ø²ÙˆÙ†"}),e.jsx("span",{className:"contentValue DT-text",children:l})]}),e.jsxs("li",{className:"contentItem",children:[e.jsx("span",{className:"contentText DT-text",children:"Ø§Ù„Ù…Ø¨Ø§Ø¹"}),e.jsx("span",{className:"contentValue DT-text",children:n})]}),e.jsxs("li",{className:"contentItem",children:[e.jsx("span",{className:"contentText DT-text",children:"Ø§Ù„Ø§Ø¬Ù…Ø§Ù„ÙŠ"}),e.jsx("span",{className:"contentValue DT-text",children:i})]})]})},M=({handleAction:s})=>e.jsxs("div",{className:"InventoryActionsBtns",children:[e.jsx("button",{className:"add",onClick:()=>s("add"),children:"+"}),e.jsx("button",{className:"Remove",onClick:()=>s("remove"),children:"-"})]}),R=({variants:s=[],selectedIndex:a=0,onSelect:r=()=>{},activeFilterColor:c="all",isManuallySelected:d=!1})=>e.jsx("ul",{className:"SCBG-container",children:s.map((l,n)=>e.jsx("li",{className:`coloritem ${a===n?"active":""} ${!d&&c!=="all"&&l.id===c?"match":""}`,style:{backgroundColor:l.code||"transparent"},onClick:()=>r(n),title:l.name},l.id||n))}),w=({handleAction:s,allData:a,selectedVariantIndex:r=0,onSelectVariant:c,activeFilterColor:d,isManuallySelected:l})=>{const n=a?.variants?.[r]?.image||y,i=a?.variants?.[r]||null,h=u=>{c?.(u)};return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"imageContent",children:[e.jsx("div",{className:"cardImgWrapper",children:e.jsx("img",{src:n,alt:a?.name||""})}),e.jsx(R,{variants:a?.variants||[],selectedIndex:r,onSelect:h,activeFilterColor:d,isManuallySelected:l}),e.jsx(M,{handleAction:s}),e.jsxs("div",{className:"colorTitle",children:[e.jsx("span",{className:"colorSwatch",style:{display:"inline-block",width:10,height:10,marginInlineEnd:5,verticalAlign:"middle",backgroundColor:i?.code||"transparent",border:i?.code?"1px solid rgba(0,0,0,0.12)":"1px solid transparent",borderRadius:2}}),e.jsx("span",{children:i?.name||i?.id||"-"})]}),e.jsx("div",{className:"shapeTitle",children:a.name}),e.jsx("div",{className:"cardTitle",children:a.typeName})]}),e.jsx(E,{allData:a,selectedVariantIndex:r})]})},V=({activeAction:s,allData:a,selectedVariantIndex:r=0})=>{const c=a?.variants?.[r],d=S(l=>l.curtainTypes.find(n=>n.id===a?.typeId));return e.jsxs("header",{className:"formHeader",children:[e.jsx("div",{className:"formTitle",children:s==="add"?"Ø¥Ø¯Ø®Ø§Ù„ Ù…Ù†ØªØ¬":"Ø¥Ø®Ø±Ø§Ø¬ Ù…Ù†ØªØ¬"}),e.jsxs("ul",{className:"productData",children:[e.jsxs("li",{className:"dataItem",children:[e.jsx("div",{className:"dataTitle",children:"Ø§Ù„Ù†ÙˆØ¹"}),e.jsx("div",{className:"dataValue",children:d?.name||"N/A"})]}),e.jsxs("li",{className:"dataItem",children:[e.jsx("div",{className:"dataTitle",children:"Ø§Ù„Ø´ÙƒÙ„"}),e.jsx("div",{className:"dataValue",children:a?.name||"N/A"})]}),e.jsxs("li",{className:"dataItem",children:[e.jsx("div",{className:"dataTitle",children:"Ø§Ù„Ù„ÙˆÙ†"}),e.jsx("div",{className:"dataValue",children:c?.name||"N/A"})]}),e.jsxs("li",{className:"dataItem",children:[e.jsx("div",{className:"dataTitle",children:"Ø§Ù„Ù…Ø®Ø²ÙˆÙ†"}),e.jsx("div",{className:"dataValue",children:c?.inStock||0})]})]})]})},A=({handleCancel:s,onSave:a})=>e.jsxs("footer",{className:"formFooter",children:[e.jsx("button",{className:"fromBtn cancelBtn",onClick:s,children:"Ø§Ù„ØºØ§Ø¡"}),e.jsx("button",{className:"fromBtn saveBtn",onClick:a,children:"Ø­ÙØ¸"})]}),H=({activeAction:s,handleCancel:a,allData:r,onSubmit:c,selectedVariantIndex:d=0})=>{const l=o.useRef(),n=o.useRef(),i=()=>{s==="add"&&l.current?l.current.handleSubmit?.():s==="remove"&&n.current&&n.current.handleSubmit?.()};return e.jsxs(e.Fragment,{children:[e.jsx(V,{activeAction:s,allData:r,selectedVariantIndex:d}),s==="add"&&e.jsx(b,{ref:l,allData:r,onSubmit:c,selectedVariantIndex:d}),s==="remove"&&e.jsx(I,{ref:n,allData:r,onSubmit:c,selectedVariantIndex:d}),e.jsx(A,{handleCancel:a,onSave:i})]})},P=({allData:s,activeFilterColor:a})=>{const[r,c]=o.useState(!1),[d,l]=o.useState(null),[n,i]=o.useState(0),[h,u]=o.useState(!1),f=t=>{l(t),c(!0)},x=t=>{t.preventDefault(),c(!1)},p=()=>{c(!1),l(null)},N=t=>{i(t),u(!0)};return o.useEffect(()=>{if(h||!a||a==="all")return;const t=s?.variants?.findIndex(m=>m.id===a);typeof t=="number"&&t>=0&&i(t)},[a,s,h]),o.useEffect(()=>{u(!1)},[a]),e.jsxs("div",{className:`cardWrapper ${r?"flipped":""}`,children:[e.jsx("div",{className:"flip-face productView frontFace",children:e.jsx(w,{handleAction:f,allData:s,selectedVariantIndex:n,onSelectVariant:N,activeFilterColor:a,isManuallySelected:h})}),e.jsx("div",{className:"flip-face productForm backFace",children:e.jsx(H,{activeAction:d,handleCancel:x,allData:s,onSubmit:p,selectedVariantIndex:n})})]})};function L(s){return F({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M10.83 8H21V6H8.83l2 2zm5 5H18v-2h-4.17l2 2zM14 16.83V18h-4v-2h3.17l-3-3H6v-2h2.17l-3-3H3V6h.17L1.39 4.22 2.8 2.81l18.38 18.38-1.41 1.41L14 16.83z"},child:[]}]})(s)}const G=({curtainTypes:s,onFilter:a,onColorChange:r})=>{const[c,d]=o.useState(""),[l,n]=o.useState("all"),[i,h]=o.useState("all"),[u,f]=o.useState(!1),x=o.useMemo(()=>{const t=new Map;return s.forEach(m=>{m.shapes.forEach(v=>{v.variants.forEach(j=>{t.has(j.id)||t.set(j.id,{id:j.id,name:j.name,code:j.code})})})}),Array.from(t.values())},[s]),p=o.useMemo(()=>s.map(m=>({...m,shapes:m.shapes.filter(v=>{const j=c===""||v.name.toLowerCase().includes(c.toLowerCase())||m.name.toLowerCase().includes(c.toLowerCase()),C=l==="all"||m.id===l,g=i==="all"||v.variants.some(T=>T.id===i);return j&&C&&g})})).filter(m=>m.shapes.length>0),[s,c,l,i]);o.useEffect(()=>{a?.(p)},[p,a]),o.useEffect(()=>{r?.(i)},[i,r]);const N=p.reduce((t,m)=>t+m.shapes.length,0);return e.jsxs("div",{className:"filterSearchContainer",children:[e.jsxs("div",{className:"filterHeader",children:[e.jsxs("div",{className:"searchBox",children:[e.jsx("input",{type:"text",placeholder:"Ø§Ø¨Ø­Ø« Ø¹Ù† Ø´ÙƒÙ„ Ø£Ùˆ Ù†ÙˆØ¹...",value:c,onChange:t=>d(t.target.value),className:"searchInput"}),e.jsx("span",{className:"searchIcon",children:"ðŸ”"})]}),e.jsx("div",{className:"filterGroup",children:e.jsxs("select",{value:l,onChange:t=>n(t.target.value),className:"filterSelect",children:[e.jsx("option",{value:"all",children:"Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø£Ù†ÙˆØ§Ø¹"}),s.map(t=>e.jsx("option",{value:t.id,children:t.name},t.id))]})}),e.jsx("div",{className:"colorFilter",children:x.map(t=>e.jsx("button",{className:`colorOptionBtn ${i===t.id?"active":""}`,onClick:()=>h(t.id),title:t.name,style:{backgroundColor:t.code,color:t.code==="#FFFFFF"||t.code==="#FFD700"?"#000":"#fff"},"data-color-id":t.id},t.id))}),e.jsx("div",{className:"filterResults",children:e.jsx("strong",{children:N})}),e.jsx("button",{className:"clearFiltersBtn",onClick:()=>{d(""),n("all"),h("all")},children:e.jsx(L,{})})]}),N===0&&c!==""&&e.jsx("div",{className:"noResults",children:"Ù„Ù… ÙŠØªÙ… Ø§Ù„Ø¹Ø«ÙˆØ± Ø¹Ù„Ù‰ Ù…Ù†ØªØ¬Ø§Øª ØªØ·Ø§Ø¨Ù‚ Ø§Ù„Ø¨Ø­Ø«"})]})},K=()=>{const s=B(),[a,r]=o.useState(s),[c,d]=o.useState("all"),l=a.map(n=>e.jsx("div",{className:"typeSection",children:e.jsxs("div",{className:"ProductsContainer",children:[e.jsx("div",{className:"typeTitle",children:n.name}),n.shapes.map(i=>e.jsx(P,{allData:{...i,typeId:n.id,typeName:n.name},activeFilterColor:c},`${n.id}-${i.id}`))]})},n.id));return e.jsx(e.Fragment,{children:e.jsx(k,{children:e.jsxs("div",{className:"PAGE inventoryPage ",children:[e.jsx(G,{curtainTypes:s,onFilter:r,onColorChange:d}),l]})})})};export{K as default};
