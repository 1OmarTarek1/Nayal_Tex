import{G as q,j as e}from"./vendor-ui-DzKfmWQ2.js";import{a as i,b as R}from"./vendor-react-BMup7rWC.js";import{u as E,T as J,b as ne,M as le}from"./index-DieooP7I.js";import"./vendor-state-B05B3u4P.js";import"./vendor-charts-8MqGPDjv.js";function re(a){return q({attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M288 80c-65.2 0-118.8 29.6-159.9 67.7C89.6 183.5 63 226 49.4 256c13.6 30 40.2 72.5 78.6 108.3C169.2 402.4 222.8 432 288 432s118.8-29.6 159.9-67.7C486.4 328.5 513 286 526.6 256c-13.6-30-40.2-72.5-78.6-108.3C406.8 109.6 353.2 80 288 80zM95.4 112.6C142.5 68.8 207.2 32 288 32s145.5 36.8 192.6 80.6c46.8 43.5 78.1 95.4 93 131.1c3.3 7.9 3.3 16.7 0 24.6c-14.9 35.7-46.2 87.7-93 131.1C433.5 443.2 368.8 480 288 480s-145.5-36.8-192.6-80.6C48.6 356 17.3 304 2.5 268.3c-3.3-7.9-3.3-16.7 0-24.6C17.3 208 48.6 156 95.4 112.6zM288 336c44.2 0 80-35.8 80-80s-35.8-80-80-80c-.7 0-1.3 0-2 0c1.3 5.1 2 10.5 2 16c0 35.3-28.7 64-64 64c-5.5 0-10.9-.7-16-2c0 .7 0 1.3 0 2c0 44.2 35.8 80 80 80zm0-208a128 128 0 1 1 0 256 128 128 0 1 1 0-256z"},child:[]}]})(a)}const B=a=>{if(a==null)return a;const t={0:"٠",1:"١",2:"٢",3:"٣",4:"٤",5:"٥",6:"٦",7:"٧",8:"٨",9:"٩"};return String(a).replace(/[0-9]/g,p=>t[p])},oe=({stats:a})=>e.jsxs("div",{className:"summaryCards",children:[e.jsxs("div",{className:"summaryCard",children:[e.jsx("div",{className:"summaryLabel",children:"إجمالي العمليات"}),e.jsx("div",{className:"summaryValue",children:a.transactions})]}),e.jsxs("div",{className:"summaryCard added",children:[e.jsx("div",{className:"summaryLabel",children:"المضافة"}),e.jsx("div",{className:"summaryValue",children:a.added})]}),e.jsxs("div",{className:"summaryCard removed",children:[e.jsx("div",{className:"summaryLabel",children:"المباعة"}),e.jsx("div",{className:"summaryValue",children:a.removed})]})]}),ce=({filterType:a,setFilterType:t,curtainType:p,setCurtainType:y,colorFilter:I,setColorFilter:C,searchTerm:u,setSearchTerm:o,dateSort:j,setDateSort:S,quantitySort:x,setQuantitySort:b,dateFrom:v,setDateFrom:T,dateTo:w,setDateTo:f,curtainTypes:D,uniqueColors:F,onClearFilters:m,onDeleteAll:c})=>e.jsxs("div",{className:"filterSection",children:[e.jsx("div",{className:"filterGroup",children:e.jsxs("select",{id:"typeFilter",value:a,onChange:l=>t(l.target.value),className:"filterSelect",children:[e.jsx("option",{id:"allId",value:"all",children:"كل العمليات"}),e.jsx("option",{id:"addId",value:"add",children:"إضافة منتجات"}),e.jsx("option",{id:"remvId",value:"remove",children:"بيع منتجات"})]})}),e.jsx("div",{className:"filterGroup",children:e.jsxs("select",{id:"curtainTypeFilter",value:p,onChange:l=>y(l.target.value),className:"filterSelect",children:[e.jsx("option",{id:"valAllId",value:"all",children:"كل الأنواع"}),D.map(l=>e.jsx("option",{id:l.id,value:l.name,children:l.name},l.id))]})}),e.jsx("div",{className:"filterGroup",children:e.jsxs("select",{id:"colorFilter",value:I,onChange:l=>C(l.target.value),className:"filterSelect",children:[e.jsx("option",{id:"valAllColorsId",value:"all",children:"كل الألوان"}),F.map((l,d)=>e.jsx("option",{id:d,value:l,children:l},d))]})}),e.jsx("div",{className:"filterGroup searchGroup",children:e.jsx("input",{id:"search",type:"text",placeholder:"ابحث عن منتج أو نوع أو لون...",value:u,onChange:l=>o(l.target.value),className:"searchInput"})}),e.jsx("div",{className:"filterGroup",children:e.jsxs("select",{id:"dateSortId",value:j,onChange:l=>S(l.target.value),className:"sortSelect",children:[e.jsx("option",{id:"valNewestFirstId",value:"desc",children:"الأحدث أولاً ✓"}),e.jsx("option",{id:"valOldestFirstId",value:"asc",children:"الأقدم أولاً"})]})}),e.jsx("div",{className:"filterGroup",children:e.jsxs("select",{id:"quantitySortId",value:x,onChange:l=>b(l.target.value),className:"sortSelect",children:[e.jsx("option",{id:"valNoSortId",value:"none",children:"بدون ترتيب"}),e.jsx("option",{id:"valLargestFirstId",value:"desc",children:"الأكبر أولاً"}),e.jsx("option",{id:"valSmallestFirstId",value:"asc",children:"الأصغر أولاً"})]})}),e.jsx("div",{className:"filterGroup",children:e.jsx("input",{id:"dateFrom",type:"date",value:v,onChange:l=>T(l.target.value),className:"dateInput"})}),e.jsx("div",{className:"filterGroup",children:e.jsx("input",{id:"dateTo",type:"date",value:w,onChange:l=>f(l.target.value),className:"dateInput",min:v})}),e.jsx("div",{className:"filterGroup",children:e.jsxs("div",{style:{display:"flex",gap:8},children:[e.jsx("button",{className:"actionBtn",onClick:m,style:{backgroundColor:"var(--DT-nestedComponent)",border:"1px solid var(--DT-borderLight)"},children:"مسح الفلاتر"}),e.jsx("button",{className:"actionBtn danger",onClick:c,children:"حذف الكل"})]})})]});function ie(a){return q({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M32 464a48 48 0 0 0 48 48h288a48 48 0 0 0 48-48V128H32zm272-256a16 16 0 0 1 32 0v224a16 16 0 0 1-32 0zm-96 0a16 16 0 0 1 32 0v224a16 16 0 0 1-32 0zm-96 0a16 16 0 0 1 32 0v224a16 16 0 0 1-32 0zM432 32H312l-9.4-18.7A24 24 0 0 0 281.1 0H166.8a23.72 23.72 0 0 0-21.4 13.3L136 32H16A16 16 0 0 0 0 48v32a16 16 0 0 0 16 16h416a16 16 0 0 0 16-16V48a16 16 0 0 0-16-16z"},child:[]}]})(a)}function de(a){return q({attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M402.3 344.9l32-32c5-5 13.7-1.5 13.7 5.7V464c0 26.5-21.5 48-48 48H48c-26.5 0-48-21.5-48-48V112c0-26.5 21.5-48 48-48h273.5c7.1 0 10.7 8.6 5.7 13.7l-32 32c-1.5 1.5-3.5 2.3-5.7 2.3H48v352h352V350.5c0-2.1.8-4.1 2.3-5.6zm156.6-201.8L296.3 405.7l-90.4 10c-26.2 2.9-48.5-19.2-45.6-45.6l10-90.4L432.9 17.1c22.9-22.9 59.9-22.9 82.7 0l43.2 43.2c22.9 22.9 22.9 60 .1 82.8zM460.1 174L402 115.9 216.2 301.8l-7.3 65.3 65.3-7.3L460.1 174zm64.8-79.7l-43.2-43.2c-4.1-4.1-10.8-4.1-14.8 0L436 82l58.1 58.1 30.9-30.9c4-4.2 4-10.8-.1-14.9z"},child:[]}]})(a)}const U=({children:a,onClose:t})=>R.createPortal(e.jsx("div",{className:"modalOverlay",onClick:t,children:e.jsx("div",{className:"modalContent",onClick:p=>p.stopPropagation(),children:a})}),document.body),me=({serial:a,tx:t,formatDate:p,formatTime:y,getTypeLabel:I,getTypeClass:C,onDeleteConfirmed:u,onEditConfirmed:o})=>{const j=E(N=>N.getProduct),[S,x]=i.useState(!1),[b,v]=i.useState(!1),[T,w]=i.useState(null),[f,D]=i.useState(t.amount.toString()),[F,m]=i.useState(""),[c,l]=i.useState(""),[d,s]=i.useState(!1),[n,r]=i.useState(!1),g=j(t.typeId,t.shapeId,t.variantId)||{},M=()=>x(!0),O=()=>{D(String(t.amount)),m(t.recipientName||""),l(t.recipientPhone||""),v(!0)},k=()=>{s(!0)},P=async()=>{s(!1);try{u&&await u(t)}catch(N){w({message:N.message||"خطأ أثناء حذف العملية",type:"error"})}},L=()=>{const N=parseInt(f,10);if(isNaN(N)||N<=0){w({message:"الكمية يجب أن تكون رقم موجب",type:"error"});return}r(!0)},V=async()=>{r(!1);const N=parseInt(f,10);try{if(o){const A={};t.type==="remove"&&(A.recipientName=F,A.recipientPhone=c),await o(t,N,A)}w({message:"تم تعديل العملية بنجاح",type:"success"}),v(!1)}catch(A){w({message:A.message||"خطأ أثناء تعديل العملية",type:"error"})}};return e.jsxs(e.Fragment,{children:[T&&R.createPortal(e.jsx(J,{message:T.message,type:T.type,onClose:()=>w(null)}),document.body),e.jsxs("tr",{children:[e.jsx("td",{className:"serialCell",children:a}),e.jsx("td",{className:"dateCell",children:p(t.date)}),e.jsx("td",{className:"timeCell",children:y(t.date)}),e.jsx("td",{children:t.recipientName||"-"}),e.jsx("td",{children:t.recipientPhone?B(t.recipientPhone):"-"}),e.jsx("td",{className:`typeCell ${C(t.type)}`,children:e.jsx("span",{className:"typeBadge",children:I(t.type)})}),e.jsx("td",{children:t.typeName}),e.jsx("td",{children:t.shapeName}),e.jsx("td",{children:e.jsxs("div",{className:"colorCell",children:[e.jsx("span",{className:"colorDot",style:{backgroundColor:t.colorCode},title:t.colorName}),t.colorName]})}),e.jsx("td",{className:"amountCell",children:e.jsx("strong",{children:B(t.amount)})}),e.jsxs("td",{className:"actionsCell",children:[e.jsx("button",{className:"actionTBtn",onClick:M,children:e.jsx(re,{})}),e.jsx("button",{className:"actionTBtn",onClick:O,children:e.jsx(de,{})}),e.jsx("button",{className:"actionTBtn danger",onClick:k,children:e.jsx(ie,{})})]})]}),S&&e.jsxs(U,{onClose:()=>x(!1),children:[e.jsx("h3",{children:"معلومات المنتج"}),e.jsxs("div",{className:"productViewRow",children:[e.jsx("img",{src:g.image||"",alt:t.productName}),e.jsxs("ul",{className:"showDetailsList",children:[e.jsxs("li",{children:[e.jsx("span",{children:"النوع"})," ",e.jsx("span",{children:t.typeName})]}),e.jsxs("li",{children:[e.jsx("span",{children:"الشكل"})," ",e.jsx("span",{children:t.shapeName})]}),e.jsxs("li",{children:[e.jsx("span",{children:"اللون"})," ",e.jsx("span",{children:t.colorName})]}),e.jsxs("li",{children:[e.jsx("span",{children:"المخزون"})," ",e.jsx("span",{children:g.inStock??"-"})]}),e.jsxs("li",{children:[e.jsx("span",{children:"المباع"})," ",e.jsx("span",{children:g.sold??"-"})]})]})]}),e.jsx("div",{style:{textAlign:"right",marginTop:12},children:e.jsx("button",{className:"actionBtn",onClick:()=>x(!1),children:"اغلاق"})})]}),b&&e.jsxs(U,{onClose:()=>v(!1),children:[e.jsx("h3",{children:"تعديل الكمية"}),e.jsxs("div",{className:"formGroup",children:[e.jsxs("label",{children:["الكمية الحالية: ",e.jsx("strong",{children:t.amount})]}),e.jsx("input",{id:"userCount",type:"number",value:f,onChange:N=>D(N.target.value),min:"1"})]}),t.type==="remove"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"formGroup",children:[e.jsx("label",{children:"اسم العميل:"}),e.jsx("input",{id:"userName",type:"text",value:F,onChange:N=>m(N.target.value),placeholder:"اسم العميل"})]}),e.jsxs("div",{className:"formGroup",children:[e.jsx("label",{children:"رقم الهاتف:"}),e.jsx("input",{id:"userNum",type:"text",value:c,onChange:N=>l(N.target.value),placeholder:"رقم الهاتف"})]})]}),e.jsxs("div",{style:{textAlign:"right",marginTop:12,display:"flex",gap:5},children:[e.jsx("button",{className:"actionBtn",onClick:L,children:"حفــــــــظ"}),e.jsx("button",{className:"actionBtn",onClick:()=>v(!1),children:"إلغاء"})]})]}),d&&e.jsxs(U,{onClose:()=>s(!1),children:[e.jsx("h3",{children:"تأكيد الحذف"}),e.jsx("p",{children:"هل أنت متأكد من أنك تريد حذف هذه العملية؟ سيتم إرجاع المخزون إلى الحالة السابقة."}),e.jsxs("div",{style:{textAlign:"right",marginTop:12,display:"flex",gap:5},children:[e.jsx("button",{className:"actionBtn danger",onClick:P,children:"نعم، احذف"}),e.jsx("button",{className:"actionBtn",onClick:()=>s(!1),children:"إلغاء"})]})]}),n&&e.jsxs(U,{onClose:()=>r(!1),children:[e.jsx("h3",{children:"تأكيد تعديل العملية"}),e.jsxs("p",{children:["هل أنت متأكد من تعديل الكمية من ",e.jsx("strong",{children:t.amount})," إلى ",e.jsx("strong",{children:f}),"؟"]}),t.type==="remove"&&e.jsx("div",{style:{marginTop:8,fontSize:"0.9em",color:"#666"},children:e.jsx("p",{children:"سيتم تحديث بيانات العميل أيضاً."})}),e.jsxs("div",{className:"",style:{textAlign:"right",marginTop:12,display:"flex",gap:5},children:[e.jsx("button",{className:"actionBtn",onClick:V,children:"نعم، قم بالتعديل"}),e.jsx("button",{className:"actionBtn",onClick:()=>r(!1),children:"إلغاء"})]})]})]})},ue=({transactions:a,filteredTotal:t,totalTransactions:p,formatDate:y,formatTime:I,getTypeLabel:C,getTypeClass:u,onDeleteConfirmed:o,onEditConfirmed:j})=>e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"tableContainer",children:a.length===0?e.jsx("div",{className:"noTransactions",children:e.jsx("p",{children:"لا توجد عمليات حالياً"})}):e.jsxs("table",{className:"transactionsTable",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"م"}),e.jsx("th",{children:"التاريخ"}),e.jsx("th",{children:"الوقت"}),e.jsx("th",{children:"اسم العميل"}),e.jsx("th",{children:"رقم الهاتف"}),e.jsx("th",{children:"نوع العملية"}),e.jsx("th",{children:"النوع"}),e.jsx("th",{children:"الشكل"}),e.jsx("th",{children:"اللون"}),e.jsx("th",{children:"الكمية"}),e.jsx("th",{children:"إجـــــــــــراءات"})]})}),e.jsx("tbody",{children:a.map((S,x)=>e.jsx(me,{serial:B(x+1),tx:S,formatDate:y,formatTime:I,getTypeLabel:C,getTypeClass:u,onDeleteConfirmed:o,onEditConfirmed:j},S.id))})]})}),a.length>0&&e.jsx("div",{className:"resultsSummary",children:e.jsxs("p",{children:["عرض ",e.jsx("strong",{children:a.length})," من ",e.jsx("strong",{children:p})," عملية — الإجمالي: ",e.jsx("strong",{children:t})," وحدة"]})})]}),he=({undoBuffer:a,undoCountdown:t,onUndo:p,onClose:y})=>!a||!a.txs||a.txs.length===0?null:e.jsxs("div",{className:"undoSnackbar",role:"status",children:[e.jsxs("div",{className:"undoMessage",children:["تم حذف ",a.txs.length," عملية"]}),e.jsxs("div",{className:"undoCountdown",children:[B(t),"ث"]}),e.jsxs("div",{className:"undoActions",children:[e.jsx("button",{className:"actionBtn",onClick:p,children:"تراجع"}),e.jsx("button",{className:"actionBtn",onClick:y,children:"إغلاق"})]})]}),pe=a=>{const[t,p]=i.useState("all"),[y,I]=i.useState("all"),[C,u]=i.useState("all"),[o,j]=i.useState(""),[S,x]=i.useState("desc"),[b,v]=i.useState("none"),[T,w]=i.useState(""),[f,D]=i.useState(""),F=()=>{p("all"),I("all"),u("all"),j(""),w(""),D(""),x("desc"),v("none")},m=i.useMemo(()=>{let s=a.filter(n=>{const r=t==="all"||n.type===t,g=y==="all"||n.typeName&&n.typeName.trim().toLowerCase()===y.trim().toLowerCase(),M=C==="all"||n.colorName&&n.colorName.trim().toLowerCase()===C.trim().toLowerCase(),O=!o||n.productName&&n.productName.toLowerCase().includes(o.toLowerCase())||n.colorName&&n.colorName.toLowerCase().includes(o.toLowerCase())||n.typeName&&n.typeName.toLowerCase().includes(o.toLowerCase())||n.shapeName&&n.shapeName.toLowerCase().includes(o.toLowerCase())||n.recipientName&&n.recipientName.toLowerCase().includes(o.toLowerCase());let k=!0;if(T||f){const P=new Date(n.date);if(P.setHours(0,0,0,0),T){const L=new Date(T);L.setHours(0,0,0,0),k=k&&P>=L}if(f){const L=new Date(f);L.setHours(23,59,59,999),k=k&&P<=L}}return r&&g&&M&&O&&k});return s.sort((n,r)=>{const g=new Date(n.date),M=new Date(r.date);return S==="desc"?M-g:g-M}),b!=="none"&&s.sort((n,r)=>b==="desc"?r.amount-n.amount:n.amount-r.amount),s},[a,t,o,S,b,y,C,T,f]),c=i.useMemo(()=>{const s=new Map;return a.forEach(n=>{if(n.colorName){const r=n.colorName.trim();r&&!s.has(r.toLowerCase())&&s.set(r.toLowerCase(),r)}}),Array.from(s.values()).sort((n,r)=>n.localeCompare(r))},[a]),l=i.useMemo(()=>{const s=a.filter(r=>r.type==="add").reduce((r,g)=>r+g.amount,0),n=a.filter(r=>r.type==="remove").reduce((r,g)=>r+g.amount,0);return{added:s,removed:n,total:s+n,transactions:a.length}},[a]),d=i.useMemo(()=>m.reduce((s,n)=>s+(n.amount||0),0),[m]);return{filterType:t,setFilterType:p,curtainType:y,setCurtainType:I,colorFilter:C,setColorFilter:u,searchTerm:o,setSearchTerm:j,dateSort:S,setDateSort:x,quantitySort:b,setQuantitySort:v,dateFrom:T,setDateFrom:w,dateTo:f,setDateTo:D,clearAllFilters:F,filteredTransactions:m,uniqueColors:c,stats:l,filteredTotal:d}},je=(a,t,p,y,I,C,u)=>{const[o,j]=i.useState(null),[S,x]=i.useState(0),[b,v]=i.useState(!1);return i.useEffect(()=>{if(!o?.txs)return;const m=setInterval(()=>{x(c=>c>0?c-1:0)},1e3);return()=>clearInterval(m)},[o?.txs]),{undoBuffer:o,undoCountdown:S,deleteAllOpen:b,setDeleteAllOpen:v,handleDeleteConfirmed:async m=>{try{const c={...m};await t(m.id),o?.timeoutId&&clearTimeout(o.timeoutId);const l=setTimeout(()=>{j(null)},8e3);j(d=>({txs:[...d?.txs||[],c],timeoutId:l})),x(8),u({message:"تم حذف العملية. يمكنك التراجع خلال 8 ثوانٍ.",type:"success",duration:3e3})}catch(c){throw u({message:c.message||"خطأ أثناء حذف العملية",type:"error"}),c}},handleDeleteAllConfirmed:async()=>{const m=[...a],c=[],l=[];for(const d of m)try{await t(d.id),c.push({...d})}catch(s){l.push({tx:d,err:s})}if(c.length>0){o?.timeoutId&&clearTimeout(o.timeoutId);const d=setTimeout(()=>j(null),8e3);j({txs:c,timeoutId:d}),x(8),u({message:`تم حذف ${c.length} عملية. يمكنك التراجع خلال 8 ثوانٍ.`,type:"success"})}l.length>0&&u({message:`فشل حذف ${l.length} عملية بسبب قيود المخزون`,type:"warning"}),v(!1)},handleUndo:async()=>{if(!o?.txs?.length)return;const{txs:m,timeoutId:c}=o;clearTimeout(c);const l=[],d=[];for(const s of m)try{const n=I(s.typeId,s.shapeId,s.variantId)||{inStock:0,sold:0};if(s.type==="add"){const r=(n.inStock||0)+s.amount;y(s.typeId,s.shapeId,s.variantId,r,n.sold||0)}else{if((n.inStock||0)<s.amount)throw new Error("المخزون الحالي لا يكفي لإعادة العملية");const r=(n.inStock||0)-s.amount,g=(n.sold||0)+s.amount;y(s.typeId,s.shapeId,s.variantId,r,g)}p({typeId:s.typeId,shapeId:s.shapeId,variantId:s.variantId,type:s.type,amount:s.amount,date:new Date().toISOString(),typeName:s.typeName,shapeName:s.shapeName,productName:s.productName,colorName:s.colorName,colorCode:s.colorCode,recipientName:s.recipientName,recipientPhone:s.recipientPhone,note:s.note}),l.push(s)}catch(n){d.push({tx:s,err:n})}l.length>0&&u({message:`تم التراجع عن ${l.length} عملية`,type:"success"}),d.length>0&&u({message:`فشل التراجع عن ${d.length} عملية`,type:"error"}),j(null),x(0)},handleEditConfirmed:async(m,c,l={})=>{try{await C(m.id,c,l),u({message:"تم تعديل العملية بنجاح",type:"success"})}catch(d){throw u({message:d.message||"خطأ أثناء تعديل العملية",type:"error"}),d}},closeUndo:()=>{o?.timeoutId&&clearTimeout(o.timeoutId),j(null),x(0)}}},fe=()=>{const a=E(h=>h.transactions),t=E(h=>h.curtainTypes),{modifyTransaction:p,deleteTransactionWithRevert:y}=ne(),I=E(h=>h.addTransaction),C=E(h=>h.updateVariantInventory),u=E(h=>h.getProduct),[o,j]=i.useState(null),{filterType:S,setFilterType:x,curtainType:b,setCurtainType:v,colorFilter:T,setColorFilter:w,searchTerm:f,setSearchTerm:D,dateSort:F,setDateSort:m,quantitySort:c,setQuantitySort:l,dateFrom:d,setDateFrom:s,dateTo:n,setDateTo:r,clearAllFilters:g,filteredTransactions:M,uniqueColors:O,stats:k,filteredTotal:P}=pe(a),{undoBuffer:L,undoCountdown:V,deleteAllOpen:N,setDeleteAllOpen:A,handleDeleteConfirmed:K,handleDeleteAllConfirmed:W,handleUndo:X,handleEditConfirmed:Z,closeUndo:_}=je(a,y,I,C,u,p,j),ee=h=>{const G=new Date(h),Q=G.getFullYear(),z=(G.getMonth()+1).toString().padStart(2,"0"),H=G.getDate().toString().padStart(2,"0");return`${["الأحد","الإثنين","الثلاثاء","الأربعاء","الخميس","الجمعة","السبت"][G.getDay()]}  -  ${B(H)} / ${B(z)} /  ${B(Q)}`},te=h=>{const z=new Date(h).toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",hour12:!0}).split(" ");let H=z[0];const $=(z[1]||"").toUpperCase(),Y=$==="AM"?"ص":$==="PM"?"م":z[1]||"";return`${B(H)} ${Y}`},se=h=>h==="add"?"إضافة":"سحـب",ae=h=>h==="add"?"type-add":"type-remove";return e.jsxs(e.Fragment,{children:[o&&R.createPortal(e.jsx(J,{message:o.message,type:o.type,onClose:()=>j(null)}),document.body),e.jsx(le,{children:e.jsxs("div",{className:"PAGE transactionHistoryPage",children:[e.jsx(oe,{stats:k}),e.jsx(ce,{filterType:S,setFilterType:x,curtainType:b,setCurtainType:v,colorFilter:T,setColorFilter:w,searchTerm:f,setSearchTerm:D,dateSort:F,setDateSort:m,quantitySort:c,setQuantitySort:l,dateFrom:d,setDateFrom:s,dateTo:n,setDateTo:r,curtainTypes:t,uniqueColors:O,onClearFilters:g,onDeleteAll:()=>A(!0)}),e.jsx(ue,{transactions:M,filteredTotal:P,totalTransactions:k.transactions,formatDate:ee,formatTime:te,getTypeLabel:se,getTypeClass:ae,onDeleteConfirmed:K,onEditConfirmed:Z}),N&&e.jsx("div",{className:"modalOverlay",onClick:()=>A(!1),children:e.jsxs("div",{className:"modalContent",onClick:h=>h.stopPropagation(),children:[e.jsx("h3",{children:"تأكيد حذف الكل"}),e.jsx("p",{children:"هل أنت متأكد من حذف جميع العمليات؟ هذا سيؤدي لإرجاع المخزون لحالته قبل هذه العمليات."}),e.jsxs("div",{style:{textAlign:"right",marginTop:12,display:"flex",gap:5},children:[e.jsx("button",{className:"actionBtn danger",onClick:W,children:"نعم، احذف الكل"}),e.jsx("button",{className:"actionBtn",onClick:()=>A(!1),children:"إلغاء"})]})]})}),e.jsx(he,{undoBuffer:L,undoCountdown:V,onUndo:X,onClose:_})]})})]})};export{fe as default};
